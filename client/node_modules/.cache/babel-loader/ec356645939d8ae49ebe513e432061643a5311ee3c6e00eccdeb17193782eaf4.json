{"ast":null,"code":"import _objectSpread from\"/home/reva-baba/Job-Dasher/client/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import React,{useState}from\"react\";import{Form,Button,Alert}from\"react-bootstrap\";import{Link}from\"react-router-dom\";import{useForm}from\"react-hook-form\";import{login}from\"../auth\";import{useNavigate}from\"react-router-dom\";import loginimage from\"../images/signup.webp\";import{jsx as _jsx,Fragment as _Fragment,jsxs as _jsxs}from\"react/jsx-runtime\";const LoginPage=()=>{const{register,handleSubmit,reset,formState:{errors}}=useForm();const[show,setShow]=useState(false);const[serverResponse,setServerResponse]=useState('');const navigate=useNavigate();const loginUser=data=>{const requestOptions={method:\"POST\",headers:{\"content-type\":\"application/json\"},body:JSON.stringify(data)};fetch(\"/auth/login\",requestOptions).then(res=>res.json()).then(data=>{login(data.access_token);const role=data.role;localStorage.setItem(\"userRole\",role);navigate(\"/\");}).catch(err=>{setServerResponse(\"Incorrect email or password\");setShow(true);});reset();};return/*#__PURE__*/_jsx(\"main\",{className:\"\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"hero form\",children:[/*#__PURE__*/_jsx(\"img\",{src:loginimage,alt:\"\",loading:\"lazy\",\"data-aos\":\"zoom-out\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"container d-flex flex-column form-card\",children:[show?/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(Alert,{variant:\"danger\",onClose:()=>setShow(false),dismissible:true,children:/*#__PURE__*/_jsx(\"p\",{children:serverResponse})}),/*#__PURE__*/_jsx(\"h1\",{children:\"Login\"})]}):/*#__PURE__*/_jsx(\"h1\",{className:\"heading\",children:\"Login\"}),/*#__PURE__*/_jsxs(Form,{className:\"lead text-start\",children:[/*#__PURE__*/_jsxs(Form.Group,{children:[/*#__PURE__*/_jsx(Form.Label,{children:\"Email\"}),/*#__PURE__*/_jsx(Form.Control,_objectSpread({type:\"email\",placeholder:\"\"},register('email',{required:true,maxLength:80}))),errors.email&&/*#__PURE__*/_jsx(\"p\",{style:{color:\"red\"},children:/*#__PURE__*/_jsx(\"small\",{children:\"enter a valid email\"})})]}),/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsxs(Form.Group,{children:[/*#__PURE__*/_jsx(Form.Label,{children:\"Password\"}),/*#__PURE__*/_jsx(Form.Control,_objectSpread({type:\"password\"},register('password',{required:true}))),errors.password&&/*#__PURE__*/_jsx(\"p\",{style:{color:\"red\"},children:/*#__PURE__*/_jsx(\"small\",{children:\"password is required\"})})]}),/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(Form.Group,{children:/*#__PURE__*/_jsx(Button,{type:\"submit\",variant:\"outline-light\",onClick:handleSubmit(loginUser),children:\"Login\"})}),/*#__PURE__*/_jsx(\"br\",{})]}),/*#__PURE__*/_jsxs(\"small\",{className:\"option\",children:[\"Don't have an account? \",/*#__PURE__*/_jsx(Link,{to:\"/signup\",children:\"Create account\"})]})]})]})});};export default LoginPage;","map":{"version":3,"names":["React","useState","Form","Button","Alert","Link","useForm","login","useNavigate","loginimage","jsx","_jsx","Fragment","_Fragment","jsxs","_jsxs","LoginPage","register","handleSubmit","reset","formState","errors","show","setShow","serverResponse","setServerResponse","navigate","loginUser","data","requestOptions","method","headers","body","JSON","stringify","fetch","then","res","json","access_token","role","localStorage","setItem","catch","err","className","children","src","alt","loading","variant","onClose","dismissible","Group","Label","Control","_objectSpread","type","placeholder","required","maxLength","email","style","color","password","onClick","to"],"sources":["/home/reva-baba/Job-Dasher/client/src/components/Login.js"],"sourcesContent":["import React, {useState} from \"react\";\nimport {Form, Button, Alert} from \"react-bootstrap\";\nimport { Link } from \"react-router-dom\";\nimport { useForm } from \"react-hook-form\";\nimport { login } from \"../auth\";\nimport {useNavigate} from \"react-router-dom\";\nimport loginimage from \"../images/signup.webp\";\n\nconst LoginPage=()=>{\n\n    const {register,handleSubmit,reset,formState:{errors}}=useForm()\n    const [show,setShow]=useState(false)\n    const [serverResponse,setServerResponse]=useState('')\n\n    const navigate = useNavigate()\n\n    const loginUser=(data)=>{\n        const requestOptions={\n            method:\"POST\",\n            headers:{\n                \"content-type\":\"application/json\"\n            },\n            body:JSON.stringify(data)\n        }\n\n        fetch(\"/auth/login\",requestOptions)\n        .then(res=>res.json())\n        .then(data=>{\n            login(data.access_token)\n            const role = data.role\n            localStorage.setItem(\"userRole\", role)\n            navigate(\"/\")\n        })\n        .catch(err=>{\n            setServerResponse(\"Incorrect email or password\")\n            setShow(true)\n        })\n\n        reset()\n    }\n    return(\n        <main className=\"\">\n            <div className=\"hero form\">\n                <img src={loginimage} alt=\"\" loading=\"lazy\" data-aos=\"zoom-out\"/>\n                <div className=\"container d-flex flex-column form-card\">\n                    {show?\n                        <>\n                            <Alert variant=\"danger\" onClose={() => setShow(false)} dismissible>\n                                <p>\n                                    {serverResponse}\n                                </p>\n                            </Alert>\n                            <h1>Login</h1>\n                        </>\n                        :\n                        <h1 className=\"heading\">Login</h1>\n                    }\n                    <Form className=\"lead text-start\">\n                        <Form.Group>\n                            <Form.Label>Email</Form.Label>\n                            <Form.Control type=\"email\" \n                                placeholder=\"\"\n                                {...register('email', {required:true,maxLength:80})}\n                            />\n                            {errors.email && <p style={{color:\"red\"}}><small>enter a valid email</small></p>}\n                        </Form.Group>\n                        <br></br>\n                        <Form.Group>\n                            <Form.Label>Password</Form.Label>\n                            <Form.Control type=\"password\"\n                                {...register('password', {required:true})}\n                                />\n                            {errors.password && <p style={{color:\"red\"}}><small>password is required</small></p>}\n                        </Form.Group>\n                        <br></br>\n                        <Form.Group>\n                            <Button \n                                type=\"submit\"\n                                variant=\"outline-light\" \n                                onClick={handleSubmit(loginUser)}\n                                >\n                                    Login\n                                </Button>\n                        </Form.Group>\n                        <br></br>\n                    </Form>\n                    <small className=\"option\">Don't have an account? <Link to=\"/signup\">Create account</Link></small>\n                </div>\n            </div>\n        </main>\n    )\n}\n\nexport default LoginPage"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}